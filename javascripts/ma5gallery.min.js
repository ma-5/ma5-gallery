/*
*   MA5Gallery
*   v 1.4
*   Copyright (c) 2015 Tomasz Kalinowski
*   http://galeria.ma5.pl
*   GitHub: https://github.com/ma-5/ma5-gallery
*/ 
;function ma5showActive(){$(".ma5-imgbox").addClass("ma5-previous"),setTimeout(function(){$(".ma5-imgbox.ma5-previous").remove(),$("body").removeClass("ma5-in")},1e3);var a=$(".ma5-active img").clone().attr("src",$(".ma5-active img").attr("src").replace(/\-thumbnail./,".")).addClass("ma5-clone");$("body").addClass("ma5-in").append('<div class="ma5-imgbox"></div>'),$(a).appendTo($(".ma5-imgbox").last())}function ma5hideActive(){$(".ma5-imgbox").on("touch click",function(){$("figure").removeClass("ma5-active"),$(".ma5-imgbox").addClass("ma5-out");$(".ma5-bg").contents();$(".ma5-tmp").addClass("ma5-out"),$(".ma5-prev, .ma5-next").remove(),setTimeout(function(){$(".ma5-tmp").remove(),$(".ma5-imgbox").remove(),$("body").removeClass("ma5-gallery-active")},800)})}function ma5goPrev(){$(".ma5-tmp .ma5-active").prev().length&&($(".ma5-tmp .ma5-active").removeClass("ma5-active").prev().addClass("ma5-active"),ma5showActive(),ma5hideActive())}function ma5goNext(){$(".ma5-tmp .ma5-active").next().length&&($(".ma5-tmp .ma5-active").removeClass("ma5-active").next().addClass("ma5-active"),ma5showActive(),ma5hideActive())}$.fn.ma5preload=function(){$("body").append('<div class="ma5-preloadbox"></div>'),this.each(function(){$(this).clone().attr("src",$(this).attr("src").replace(/\-thumbnail./,".")).appendTo(".ma5-preloadbox")})},$.fn.ma5gallery=function(a){1==a.preload&&$(this).ma5preload();var e=".ma5-tmp "+this.selector;$(this).on("touch click",function(){$(".ma5-imgbox").hasClass("ma5-out")||$("body").hasClass("ma5-in")||($(this).parent().parent().hasClass("ma5-gallery")||$(this).parent().parent().hasClass("ma5-bg")?($(this).parent().addClass("ma5-active").parent().clone().appendTo($("body")).removeClass("ma5-gallery").addClass("ma5-tmp"),$(".ma5-gallery .ma5-active").removeClass("ma5-active"),$("body").hasClass("ma5-gallery-active")||($("body").append('<div class="ma5-prev"></div><div class="ma5-next"></div>'),$("body").addClass("ma5-gallery-active"),$(".ma5-tmp").find("figure").wrapAll('<div class="ma5-bg" />'),setTimeout(function(){$(".ma5-tmp").addClass("ma5-control")},800),ma5showActive(),ma5hideActive()),$(".ma5-prev").on("touch click",function(){$("body").hasClass("ma5-gallery-active")&&!$("body").hasClass("ma5-in")&&ma5goPrev()}),$(".ma5-next").on("touch click",function(){$("body").hasClass("ma5-gallery-active")&&!$("body").hasClass("ma5-in")&&ma5goNext()}),$(e).on("touch click",function(){$(this).parent().hasClass("ma5-active")||$("body").hasClass("ma5-in")||($(".ma5-tmp figure").removeClass("ma5-active"),$(this).parent().addClass("ma5-active"),ma5showActive(),ma5hideActive())})):($(this).parent().addClass("ma5-active"),ma5showActive(),ma5hideActive()))}),$("body").keydown(function(a){$("body").hasClass("ma5-gallery-active")&&!$("body").hasClass("ma5-in")&&(37==a.keyCode?ma5goPrev():39==a.keyCode&&ma5goNext())})};